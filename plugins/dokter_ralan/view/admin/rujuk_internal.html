<div class="panel-default">
    <div class="panel-body">
      <select class="databarang_ajax" name="select1_ajax" placeholder="Please select something..."></select>
    </div>
</div>

<script>
  $(document).ready(function () {
    var strip_tags = function(str) {
      return (str + '').replace(/<\/?[^>]+(>|$)/g, '')
    };
    var truncate_string = function(str, chars) {
      if ($.trim(str).length <= chars) {
        return str;
      } else {
        return $.trim(str.substr(0, chars)) + 'â€¦';
      }
    };
    $('select').selectator('destroy');
    $('.databarang_ajax').selectator({
      labels: {
        search: 'Cari obat...'
      },
      load: function (search, callback) {
        if (search.length < this.minSearchLength) return callback();
        $.ajax({
          url: '{?=url()?}/admin/dokter_ralan/ajax?show=databarang&nama_brng=' + encodeURIComponent(search) + '&t={?=$_SESSION['token']?}',
          type: 'GET',
          dataType: 'json',
          success: function(data) {
            callback(data.slice(0, 100));
            console.log(data);
          },
          error: function() {
            callback();
          }
        });
      },
      delay: 300,
      minSearchLength: 1,
      valueField: 'kode_brng',
      textField: 'nama_brng'
    });
    $('select').selectator();
  });
</script>
